{"ast":null,"code":"import _regeneratorRuntime from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ritakosk/fso/bloglist-frontend/src/App.js\";\nimport React from 'react';\nimport Blog from './components/Blog';\nimport Notification from './components/Notification';\nimport blogService from './services/blogs';\nimport loginService from './services/login';\nimport './index.css';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleTextFieldChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.createBlog =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var blog;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return blogService.create({\n                  title: _this.state.title,\n                  author: _this.state.author,\n                  url: _this.state.url\n                });\n\n              case 4:\n                blog = _context.sent;\n\n                _this.setState({\n                  message: \"a new blog '\".concat(blog.title, \"' by \").concat(blog.author, \" added\")\n                });\n\n                _this.setState({\n                  blogs: _toConsumableArray(_this.state.blogs).concat([blog])\n                });\n\n                _this.setState({\n                  title: '',\n                  author: '',\n                  url: ''\n                });\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.setState({\n                  error: _context.t0\n                });\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 10]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.login =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(event) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                event.preventDefault();\n                _context2.prev = 1;\n                _context2.next = 4;\n                return loginService.login({\n                  username: _this.state.username,\n                  password: _this.state.password\n                });\n\n              case 4:\n                user = _context2.sent;\n                blogService.setToken(user.token);\n                window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user));\n\n                _this.setState({\n                  username: '',\n                  password: '',\n                  user: user,\n                  message: \"Logged in as \".concat(user.username)\n                });\n\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](1);\n\n                _this.setState({\n                  error: 'Wrong username or password.'\n                });\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[1, 10]]);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.logout = function () {\n      window.localStorage.removeItem('loggedInBlogUser');\n\n      _this.setState({\n        user: null,\n        message: \"Logged out.\"\n      });\n    };\n\n    _this.state = {\n      blogs: [],\n      user: null,\n      username: '',\n      password: '',\n      title: '',\n      author: '',\n      url: '',\n      error: null,\n      message: null\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      blogService.getAll().then(function (blogs) {\n        return _this2.setState({\n          blogs: blogs\n        });\n      });\n      var loggedInBlogUser = window.localStorage.getItem('loggedInBlogUser');\n\n      if (loggedInBlogUser) {\n        var user = JSON.parse(loggedInBlogUser);\n        this.setState({\n          user: user\n        });\n      }\n\n      setTimeout(function () {\n        _this2.setState({\n          error: null,\n          message: null\n        });\n      }, 5000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.user === null) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(Notification, {\n          error: this.state.error,\n          message: this.state.message,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }), React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Log in to application\"), React.createElement(\"form\", {\n          onSubmit: this.login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95\n          },\n          __self: this\n        }, \"username:\", React.createElement(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: this.state.username,\n          onChange: this.handleTextFieldChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, \"password:\", React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: this.state.password,\n          onChange: this.handleTextFieldChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"login\"))));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, \"blogs\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, this.state.user.name, \" logged in\", React.createElement(\"input\", {\n        type: \"button\",\n        value: \"logout\",\n        style: {\n          margin: 5\n        },\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.createBlog,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 128\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129\n        },\n        __self: this\n      }, \"title:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"title\",\n        value: this.state.title,\n        onChange: this.handleTextFieldChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, \"author:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"author\",\n        value: this.state.author,\n        onChange: this.handleTextFieldChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147\n        },\n        __self: this\n      }, \"url:\", React.createElement(\"input\", {\n        type: \"text\",\n        name: \"url\",\n        value: this.state.url,\n        onChange: this.handleTextFieldChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }, \"create\")))), this.state.blogs.map(function (blog) {\n        return React.createElement(Blog, {\n          key: blog._id,\n          blog: blog,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 163\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/ritakosk/fso/bloglist-frontend/src/App.js"],"names":["React","Blog","Notification","blogService","loginService","App","props","handleTextFieldChange","event","setState","target","name","value","createBlog","preventDefault","create","title","state","author","url","blog","message","blogs","error","login","username","password","user","setToken","token","window","localStorage","setItem","JSON","stringify","logout","removeItem","getAll","then","loggedInBlogUser","getItem","parse","setTimeout","margin","map","_id","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Blog from './components/Blog'\nimport Notification from './components/Notification'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport './index.css'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      blogs: [],\n      user: null,\n      username: '',\n      password: '',\n      title: '',\n      author: '',\n      url: '',\n      error: null,\n      message: null\n    }\n  }\n\n  componentDidMount() {\n    blogService.getAll().then(blogs =>\n      this.setState({ blogs })\n    )\n\n    const loggedInBlogUser = window.localStorage.getItem('loggedInBlogUser')\n    if (loggedInBlogUser) {\n      const user = JSON.parse(loggedInBlogUser)\n      this.setState({ user })\n    }\n\n    setTimeout(() => {\n      this.setState({ error: null, message: null })\n    }, 5000)\n  }\n\n  handleTextFieldChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value })\n  }\n\n  createBlog = async (event) => {\n    event.preventDefault()\n    try{\n      const blog = await blogService.create({\n       title: this.state.title,\n       author: this.state.author,\n       url: this.state.url\n      })\n      this.setState({ message: `a new blog '${blog.title}' by ${blog.author} added` })\n      this.setState({ blogs:[...this.state.blogs, blog]})\n      this.setState({ title: '', author: '', url: '' })\n    } catch (exception) {\n      this.setState({\n        error: exception\n      })\n    }\n  }\n\n  login = async (event) => {\n    event.preventDefault()\n    try{\n      const user = await loginService.login({\n        username: this.state.username,\n        password: this.state.password\n      })\n      blogService.setToken(user.token)      \n      window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user))\n\n      this.setState({ username: '', password: '', user, message: `Logged in as ${user.username}` })\n    } catch (exception) {\n      this.setState({\n        error: 'Wrong username or password.'\n      })\n    }\n  }\n\n  logout = () => {\n    window.localStorage.removeItem('loggedInBlogUser')\n    this.setState({ \n      user: null,\n      message: \"Logged out.\"\n    })\n  }\n\n  render() {\n    if (this.state.user === null) {\n      return (\n        <div>\n          <Notification error={this.state.error} message={this.state.message} />\n          <h2>Log in to application</h2>\n          <form onSubmit={this.login}>\n            <div>\n              username:\n              <input\n                type=\"text\"\n                name=\"username\"\n                value={this.state.username}\n                onChange={this.handleTextFieldChange}\n              />\n            </div>\n            <div>\n              password:\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={this.state.password}\n                onChange={this.handleTextFieldChange}\n              />\n            </div>\n            <div>\n              <button type=\"submit\">login</button>\n            </div>\n          </form>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <h2>blogs</h2>\n        <p>{this.state.user.name} logged in\n          <input type=\"button\" value=\"logout\" style={{margin: 5}} onClick={this.logout}/>\n        </p>\n\n        <div>\n          <form onSubmit={this.createBlog}>\n            <div>\n              title:\n              <input\n                type=\"text\"\n                name=\"title\"\n                value={this.state.title}\n                onChange={this.handleTextFieldChange}\n              />\n            </div>\n            <div>\n              author:\n              <input\n                type=\"text\"\n                name=\"author\"\n                value={this.state.author}\n                onChange={this.handleTextFieldChange}\n              />\n            </div>\n            <div>\n              url:\n              <input\n                type=\"text\"\n                name=\"url\"\n                value={this.state.url}\n                onChange={this.handleTextFieldChange}\n              />\n            </div>\n            <div>\n              <button type=\"submit\">create</button>\n            </div>\n          </form>\n        </div>\n\n        {this.state.blogs.map(blog => \n          <Blog key={blog._id} blog={blog}/>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}