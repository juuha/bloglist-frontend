{"ast":null,"code":"import _regeneratorRuntime from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/ritakosk/fso/bloglist-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ritakosk/fso/bloglist-frontend/src/App.js\";\nimport React from 'react';\nimport Blog from './components/Blog';\nimport blogService from './services/blogs';\nimport loginService from './services/login';\n\nvar App =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(App, _React$Component);\n\n  function App(props) {\n    var _this;\n\n    _classCallCheck(this, App);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(App).call(this, props));\n\n    _this.handleLoginFieldChange = function (event) {\n      _this.setState(_defineProperty({}, event.target.name, event.target.value));\n    };\n\n    _this.login =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(event) {\n        var user;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                event.preventDefault();\n                _context.prev = 1;\n                _context.next = 4;\n                return loginService.login({\n                  username: _this.state.username,\n                  password: _this.state.password\n                });\n\n              case 4:\n                user = _context.sent;\n                window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user));\n\n                _this.setState({\n                  username: '',\n                  password: '',\n                  user: user\n                });\n\n                _context.next = 13;\n                break;\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](1);\n\n                _this.setState({\n                  error: 'Username or password was incorrect.'\n                });\n\n                setTimeout(function () {\n                  _this.setState({\n                    error: null\n                  });\n                }, 5000);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[1, 9]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.state = {\n      blogs: [],\n      user: null,\n      username: '',\n      password: '',\n      error: ''\n    };\n    return _this;\n  }\n\n  _createClass(App, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      blogService.getAll().then(function (blogs) {\n        return _this2.setState({\n          blogs: blogs\n        });\n      });\n      var loggedInBlogUser = window.localStorage.getItem('loggedInBlogUser');\n\n      if (loggedInBlogUser) {\n        var user = JSON.parse(loggedInBlogUser);\n        this.setState({\n          user: user\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.user === null) {\n        return React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, \"Log in to application\"), React.createElement(\"form\", {\n          onSubmit: this.login,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 60\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 61\n          },\n          __self: this\n        }, \"username:\", React.createElement(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          value: this.state.username,\n          onChange: this.handleLoginFieldChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 70\n          },\n          __self: this\n        }, \"password:\", React.createElement(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          value: this.state.password,\n          onChange: this.handleLoginFieldChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, React.createElement(\"button\", {\n          type: \"submit\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, \"login\"))));\n      }\n\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88\n        },\n        __self: this\n      }, \"blogs\"), React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, this.state.user.name, \" logged in\", React.createElement(\"button\", {\n        onClick: this.logout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"logout\")), this.state.blogs.map(function (blog) {\n        return React.createElement(Blog, {\n          key: blog._id,\n          blog: blog,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        });\n      }));\n    }\n  }]);\n\n  return App;\n}(React.Component);\n\nexport default App;","map":{"version":3,"sources":["/home/ritakosk/fso/bloglist-frontend/src/App.js"],"names":["React","Blog","blogService","loginService","App","props","handleLoginFieldChange","event","setState","target","name","value","login","preventDefault","username","state","password","user","window","localStorage","setItem","JSON","stringify","error","setTimeout","blogs","getAll","then","loggedInBlogUser","getItem","parse","logout","map","blog","_id","Component"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      blogs: [],\n      user: null,\n      username: '',\n      password: '',\n      error: ''\n    }\n  }\n\n  componentDidMount() {\n    blogService.getAll().then(blogs =>\n      this.setState({ blogs })\n    )\n\n    const loggedInBlogUser = window.localStorage.getItem('loggedInBlogUser')\n    if (loggedInBlogUser) {\n      const user = JSON.parse(loggedInBlogUser)\n      this.setState({ user })\n    }\n  } \n\n  handleLoginFieldChange = (event) => {\n    this.setState({ [event.target.name]: event.target.value })\n  }\n\n  login = async (event) => {\n    event.preventDefault()\n    try{\n      const user = await loginService.login({\n        username: this.state.username,\n        password: this.state.password\n      })\n      \n      window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user))\n\n      this.setState({ username: '', password: '', user })\n    } catch (exception) {\n      this.setState({\n        error: 'Username or password was incorrect.'\n      })\n        setTimeout(() => {\n          this.setState({ error: null })\n        }, 5000)\n    }\n  }\n\n  render() {\n    if (this.state.user === null) {\n      return (\n        <div>\n          <h2>Log in to application</h2>\n          <form onSubmit={this.login}>\n            <div>\n              username:\n              <input\n                type=\"text\"\n                name=\"username\"\n                value={this.state.username}\n                onChange={this.handleLoginFieldChange}\n              />\n            </div>\n            <div>\n              password:\n              <input\n                type=\"password\"\n                name=\"password\"\n                value={this.state.password}\n                onChange={this.handleLoginFieldChange}\n              />\n            </div>\n            <div>\n              <button type=\"submit\">login</button>\n            </div>\n          </form>\n        </div>\n      )\n    }\n    return (\n      <div>\n        <h2>blogs</h2>\n        <p>{this.state.user.name} logged in\n          <button onClick={this.logout}>logout</button>\n        </p>\n        {this.state.blogs.map(blog => \n          <Blog key={blog._id} blog={blog}/>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}